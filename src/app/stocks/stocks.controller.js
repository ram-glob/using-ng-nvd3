(function() {
	'use strict';

	angular
		.module('usingGulpNg')
		.controller('StocksController', StocksController);

	function StocksController($http, $log) {
		var vm = this;
		vm.priceData = generateData();

		vm.graphData = generateGraphData();

		console.log(generateData());

		vm.monthData = [{
			'key': 'Series 1',
			'values': [
				[27, 0],
				[28, 1],
				[29, 2],
				[30, 3],
				[1, 4],
				[2, 5],
				[3, 6],
				[4, 7],
				[5, 8]
			]
		}];

		vm.availabilityData = [{
			'key': 'Available',
			'values': [	
				['Jan-2000',0],
				['Feb-2000',1366],
				['Mar-2000',1498],
				['Apr-2000',1452],
				['May-2000',1420],
				['Jun-2000',1454],
				['Jul-2000',1430],
				['Aug-2000',1517],
				['Sep-2000',1436],
				['Oct-2000',1429],
				['Nov-2000',1314],
				['Dec-2000',1320],
				['Jan-2001',1366],
				['Feb-2001',1239],
				['Mar-2001',1160],
				['Apr-2001',1249],
				['May-2001',1255],
				['Jun-2001',1224],
				['Jul-2001',1211],
				['Aug-2001',1133],
				['Sep-2001',1040],
				['Oct-2001',1059],
				['Nov-2001',1139],
				['Dec-2001',1148],
				['Jan-2002',1130],
				['Feb-2002',1106],
				['Mar-2002',1147],
				['Apr-2002',1076],
				['May-2002',1067],
				['Jun-2002',989],
				['Jul-2002',911],
				['Aug-2002',916],
				['Sep-2002',815],
				['Oct-2002',885],
				['Nov-2002',936],
				['Dec-2002',879],
				['Jan-2003',855],
				['Feb-2003',841],
				['Mar-2003',848],
				['Apr-2003',916],
				['May-2003',963],
				['Jun-2003',974],
				['Jul-2003',990],
				['Aug-2003',1008],
				['Sep-2003',995],
				['Oct-2003',1050],
				['Nov-2003',1058],
				['Dec-2003',1111],
				['Jan-2004',1131],
				['Feb-2004',1144],
				['Mar-2004',1126],
				['Apr-2004',1107],
				['May-2004',1120],
				['Jun-2004',1140],
				['Jul-2004',1101],
				['Aug-2004',1104],
				['Sep-2004',1114],
				['Oct-2004',1130],
				['Nov-2004',1173],
				['Dec-2004',1211],
				['Jan-2005',1181],
				['Feb-2005',1203],
				['Mar-2005',1180],
				['Apr-2005',1156],
				['May-2005',1191],
				['Jun-2005',1191],
				['Jul-2005',1234],
				['Aug-2005',1220],
				['Sep-2005',1228],
				['Oct-2005',1207],
				['Nov-2005',1249],
				['Dec-2005',1248],
				['Jan-2006',1280],
				['Feb-2006',1280],
				['Mar-2006',1294],
				['Apr-2006',1310],
				['May-2006',1270],
				['Jun-2006',1270],
				['Jul-2006',1276],
				['Aug-2006',1303],
				['Sep-2006',1335],
				['Oct-2006',1377],
				['Nov-2006',1400],
				['Dec-2006',1418],
				['Jan-2007',1438],
				['Feb-2007',1406],
				['Mar-2007',1420],
				['Apr-2007',1482],
				['May-2007',1530],
				['Jun-2007',1503],
				['Jul-2007',1455],
				['Aug-2007',1473],
				['Sep-2007',1526],
				['Oct-2007',1549],
				['Nov-2007',1481],
				['Dec-2007',1468],
				['Jan-2008',1378],
				['Feb-2008',1330],
				['Mar-2008',1322],
				['Apr-2008',1385],
				['May-2008',1400],
				['Jun-2008',1280],
				['Jul-2008',1267],
				['Aug-2008',1282],
				['Sep-2008',1166],
				['Oct-2008',968],
				['Nov-2008',896],
				['Dec-2008',903],
				['Jan-2009',825],
				['Feb-2009',735],
				['Mar-2009',797],
				['Apr-2009',872],
				['May-2009',919],
				['Jun-2009',919],
				['Jul-2009',987],
				['Aug-2009',1020],
				['Sep-2009',1057],
				['Oct-2009',1036],
				['Nov-2009',1095],
				['Dec-2009',1115],
				['Jan-2010',1073],
				['Feb-2010',1104],
				['Mar-2010',11405]
			]
		}];

		vm.newRankData = [{
			'key': 'Available',
			'values': [	
				['Jan-2000',0],
				['Feb-2000',1366],
				['Mar-2000',1498],
				['Apr-2000',1452],
				['May-2000',1420],
				['Jun-2000',1454],
				['Jul-2000',1430],
				['Aug-2000',1517],
				['Sep-2000',1436],
				['Oct-2000',1429],
				['Nov-2000',1314],
				['Dec-2000',1320],
				['Jan-2001',1366],
				['Feb-2001',1239],
				['Mar-2001',1160],
				['Apr-2001',1249],
				['May-2001',1255],
				['Jun-2001',1224],
				['Jul-2001',1211],
				['Aug-2001',1133],
				['Sep-2001',1040],
				['Oct-2001',1059],
				['Nov-2001',1139],
				['Dec-2001',1148],
				['Jan-2002',1130],
				['Feb-2002',1106],
				['Mar-2002',1147],
				['Apr-2002',1076],
				['May-2002',1067],
				['Jun-2002',989],
				['Jul-2002',911],
				['Aug-2002',916],
				['Sep-2002',815],
				['Oct-2002',885],
				['Nov-2002',936],
				['Dec-2002',879],
				['Jan-2003',855],
				['Feb-2003',841],
				['Mar-2003',848],
				['Apr-2003',916],
				['May-2003',963],
				['Jun-2003',974],
				['Jul-2003',990],
				['Aug-2003',1008],
				['Sep-2003',995],
				['Oct-2003',1050],
				['Nov-2003',1058],
				['Dec-2003',1111],
				['Jan-2004',1131],
				['Feb-2004',1144],
				['Mar-2004',1126],
				['Apr-2004',1107],
				['May-2004',1120],
				['Jun-2004',1140],
				['Jul-2004',1101],
				['Aug-2004',1104],
				['Sep-2004',1114],
				['Oct-2004',1130],
				['Nov-2004',1173],
				['Dec-2004',1211],
				['Jan-2005',1181],
				['Feb-2005',1203],
				['Mar-2005',1180],
				['Apr-2005',1156],
				['May-2005',1191],
				['Jun-2005',1191],
				['Jul-2005',1234],
				['Aug-2005',1220],
				['Sep-2005',1228],
				['Oct-2005',1207],
				['Nov-2005',1249],
				['Dec-2005',1248],
				['Jan-2006',1280],
				['Feb-2006',1280],
				['Mar-2006',1294],
				['Apr-2006',1310],
				['May-2006',1270],
				['Jun-2006',1270],
				['Jul-2006',1276],
				['Aug-2006',1303],
				['Sep-2006',1335],
				['Oct-2006',1377],
				['Nov-2006',1400],
				['Dec-2006',1418],
				['Jan-2007',1438],
				['Feb-2007',1406],
				['Mar-2007',1420],
				['Apr-2007',1482],
				['May-2007',1530],
				['Jun-2007',1503],
				['Jul-2007',1455],
				['Aug-2007',1473],
				['Sep-2007',1526],
				['Oct-2007',1549],
				['Nov-2007',1481],
				['Dec-2007',1468],
				['Jan-2008',1378],
				['Feb-2008',1330],
				['Mar-2008',1322],
				['Apr-2008',1385],
				['May-2008',1400],
				['Jun-2008',1280],
				['Jul-2008',1267],
				['Aug-2008',1282],
				['Sep-2008',1166],
				['Oct-2008',968],
				['Nov-2008',896],
				['Dec-2008',903],
				['Jan-2009',825],
				['Feb-2009',735],
				['Mar-2009',797],
				['Apr-2009',872],
				['May-2009',919],
				['Jun-2009',919],
				['Jul-2009',987],
				['Aug-2009',1020],
				['Sep-2009',1057],
				['Oct-2009',1036],
				['Nov-2009',1095],
				['Dec-2009',1115],
				['Jan-2010',1073],
				['Feb-2010',1104],
				['Mar-2010',11405]
			]
		}];

		vm.rankData = [{
			"key": "Series 1",
			"values": [
				[1083297600000, 0.77078283705125],
				[1085976000000, 1.8356366650335],
				[1088568000000, 5.3121322073127],
				[1091246400000, 4.9320975829662],
				[1093924800000, 3.9835408823225],
				[1096516800000, 6.8694685316805],
				[1099195200000, 8.4854877428545],
				[1101790800000, 15.933627197384],
				[1104469200000, 15.920980069544],
				[1107147600000, 12.478685045651],
				[1109566800000, 17.297761889305],
				[1112245200000, 15.247129891020],
				[1114833600000, 11.336459046839],
				[1117512000000, 13.298990907415],
				[1120104000000, 16.360027000056],
				[1122782400000, 18.527929522030],
				[1125460800000, 22.176516738685],
				[1128052800000, 23.309665368330],
				[1130734800000, 21.629973409748],
				[1133326800000, 24.186429093486]
			]
		}];

		vm.progressData = [
			{
				start_date: 10,
				end_date: 40
			},
			{
				start_date: 50,
				end_date: 100
			}
		];		

		function generateData() {

			var arr = [
				{
					key: 'retail_price',
					values: [
					]
				},
				{
					key: 'base_price',
					values: [
					]
				},
				{
					key: 'discount',
					values: [
					]
				}
			]

			var graphData = generateGraphData();
			var retail_arr = [];
			var base_arr = [];
			var discount = [];

			for(var i=0; i<graphData.length; i++){
				// console.log(graphData[i].price_history);
				retail_arr.push([graphData[i].date, graphData[i].price_history.retail_price]);
				base_arr.push([graphData[i].date, graphData[i].price_history.base_price]);
				discount.push([graphData[i].date, graphData[i].price_history.discount]);
			}

			for(var j=0;j<arr.length;j++){
				if(arr[j].key === 'retail_price'){
					console.log(arr[j].key);
					arr[j].values = retail_arr;
				}else if(arr[j].key === 'base_price'){
					arr[j].values = base_arr;
				}else{
					arr[j].values = discount;
				}
			}

			// console.log(arr);

			// return arr;

			return [{
				key: "Retail Price",
				values: [
					[1083297600000, 2.974623048543],
					[1085976000000, 1.7740300785979],
					[1088568000000, 4.4681318138177],
					[1091246400000, 7.0242541001353],
					[1093924800000, 7.5709603667586],
					[1096516800000, 20.612245065736],
					[1099195200000, 21.698065237316],
					[1101790800000, 40.501189458018],
					[1104469200000, 50.464679413194],
					[1107147600000, 48.917421973355],
					[1109566800000, 63.750936549160],
					[1112245200000, 59.072499126460],
					[1114833600000, 43.373158880492],
					[1117512000000, 54.490918947556],
					[1120104000000, 56.661178852079],
					[1122782400000, 73.450103545496],
					[1125460800000, 71.714526354907],
					[1128052800000, 85.221664349607],
					[1130734800000, 77.769261392481],
					[1133326800000, 95.966528716500]
				]
			}, {
				key: "Base Price",
				values: [
					[1083297600000, 0.77078283705125],
					[1085976000000, 1.8356366650335],
					[1088568000000, 5.3121322073127],
					[1091246400000, 4.9320975829662],
					[1093924800000, 3.9835408823225],
					[1096516800000, 6.8694685316805],
					[1099195200000, 8.4854877428545],
					[1101790800000, 15.933627197384],
					[1104469200000, 15.920980069544],
					[1107147600000, 12.478685045651],
					[1109566800000, 17.297761889305],
					[1112245200000, 15.247129891020],
					[1114833600000, 11.336459046839],
					[1117512000000, 13.298990907415],
					[1120104000000, 16.360027000056],
					[1122782400000, 18.527929522030],
					[1125460800000, 22.176516738685],
					[1128052800000, 23.309665368330],
					[1130734800000, 21.629973409748],
					[1133326800000, 24.186429093486]
				]
			}, {
				key: "Discount",
				values: [
					[1083297600000, 1.7454058855943],
					[1085976000000, 1.6096667436314],
					[1088568000000, 0.8440003934950],
					[1091246400000, 2.0921565171691],
					[1093924800000, 1.5874194844361],
					[1096516800000, 13.742776534056],
					[1099195200000, 13.212577494462],
					[1101790800000, 24.567562260634],
					[1104469200000, 34.543699343650],
					[1107147600000, 36.438736927704],
					[1109566800000, 46.453174659855],
					[1112245200000, 43.825369235440],
					[1114833600000, 32.036699833653],
					[1117512000000, 41.191928040141],
					[1120104000000, 40.301151852023],
					[1122782400000, 54.922174023466],
					[1125460800000, 29.538009616222],
					[1128052800000, 31.911998981277],
					[1130734800000, 36.139287982733],
					[1133326800000, 31.780099623014]
				]
			}, {
				key: "blank",
				values: [
					[1083297600000, 0],
					[1133326800000, 0]
				]
			}];
		}

		function changeData() {
			vm.progressData = [
				{
					start_date: 5,
					end_date: 15
				},
				{
					start_date: 20,
					end_date: 30
				},
				{
					start_date: 50,
					end_date: 80
				}
			];
		}

		function generateGraphData(){
			return [
			  {
			    date:"02-25-2006",
			    price_history: {
			        base_price: 100,
			  	    retail_price: 120,
			  	    discount: 10
			    },
			    ranking_history: 3.2,
			    available_history: true
			  },
			  {
			    date:"01-02-2007",
			    price_history: {
			        base_price: 200,
			  	    retail_price: 220,
			  	    discount: 20
			    },
			    ranking_history: 1.2,
			    available_history: false
			  },
			  {
			    date:"08-15-2008",
			    price_history: {
			        base_price: 300,
			  	    retail_price: 320,
			  	    discount: 30
			    },
			    ranking_history: 2.2,
			    available_history: true
			  },
			  {
			    date:"05-13-2009",
			    price_history: {
			        base_price: 400,
			  	    retail_price: 420,
			  	    discount: 40
			    },
			    ranking_history: 3.2,
			    available_history: false
			  },
			  {
			    date:"09-09-2013",
			    price_history: {
			        base_price: 500,
			  	    retail_price: 520,
			  	    discount: 50
			    },
			    ranking_history: 3.2,
			    available_history: true
			  },
			  {
			    date:"11-18-2016",
			    price_history: {
			        base_price: 250,
			  	    retail_price: 320,
			  	    discount: 40
			    },
			    ranking_history: 4.2,
			    available_history: true
			  },
			  {
			    date:"12-23-2015",
			    price_history: {
			        base_price: 350,
			  	    retail_price: 120,
			  	    discount: 50
			    },
			    ranking_history: 1.2,
			    available_history: false
			  },
			  {
			    date:"04-24-2014",
			    price_history: {
			        base_price: 450,
			  	    retail_price: 520,
			  	    discount: 40
			    },
			    ranking_history: 3.2,
			    available_history: true
			  },
			  {
			    date:"05-01-2012",
			    price_history: {
			        base_price: 150,
			  	    retail_price: 220,
			  	    discount: 20
			    },
			    ranking_history: 2.2,
			    available_history: true
			  },
			  {
			    date:"07-10-2011",
			    price_history: {
			        base_price: 550,
			  	    retail_price: 620,
			  	    discount: 40
			    },
			    ranking_history: 4.2,
			    available_history: false
			  },
			  {
			    date:"10-25-2010",
			    price_history: {
			        base_price: 650,
			  	    retail_price: 720,
			  	    discount: 30
			    },
			    ranking_history: 5.2,
			    available_history: false
			  },
			  {
			    date:"03-30-2005",
			    price_history: {
			        base_price: 700,
			  	    retail_price: 820,
			  	    discount: 30
			    },
			    ranking_history: 1.2,
			    available_history: true
			  }
			];
		}
	}
})();
